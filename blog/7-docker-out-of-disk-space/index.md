---
layout: post
title: "dockerë¥¼ ìš´ì˜í•˜ë‹¤ê°€ ìš©ëŸ‰ ë¶€ì¡± ë¬¸ì œë¥¼ ê²ªì„ ë•Œ."
subtitle: "ì•ˆì“°ëŠ” ì´ë¯¸ì§€, ì»¨í…Œì´ë„ˆ ì‚­ì œ ë° docker ê¸°ë³¸ê²½ë¡œ ë³€ê²½"
draft : false
type: "Tips"
blog: true
text: true
author: "Jinwoo Jeong"
post-header: true
header-img: img/header-img.png
order: 7
---

## ë“¤ì–´ê°€ë©´ì„œ

dockerë¥¼ ì‚¬ìš©í•˜ë‹¤ ë³´ë©´ ë§ì€ ì´ë¯¸ì§€ì™€ ì»¨í…Œì´ë„ˆë¥¼ ë‹¤ë£¨ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ docker ê¸°ë³¸ ê²½ë¡œì—ëŠ” ë§ì€ ìš©ëŸ‰ì´ ëˆ„ì ë˜ê²Œ ë˜ê³ , ë¬¼ë¦¬ì ì¸ ìš©ëŸ‰ ë¶€ì¡± ë¬¸ì œë¥¼ ê²ªê²Œ ë©ë‹ˆë‹¤. ìš©ëŸ‰ ë¶€ì¡±ë¬¸ì œê°€ ì•„ë‹ˆê²Œ ë˜ë”ë¼ë„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ì™€ ì»¨í…Œì´ë„ˆë¥¼ ì‚­ì œí•¨ìœ¼ë¡œ ì—¬ìœ ê³µê°„ì„ ë”ìš± í™•ë³´í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ì´ì— ë”°ë¼ í•´ê²°ë°©ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

## í•´ê²°ë°©ë²•

í•´ê²° ë°©ë²•ì—ëŠ” ëª‡ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤. 

#### ì•ˆì“°ëŠ” ì´ë¯¸ì§€, ì»¨í…Œì´ë„ˆ ì‚­ì œ

ì»¨í…Œì´ë„ˆì™€ ì´ë¯¸ì§€ë¥¼ `rm` ë˜ëŠ” `rmi` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ì§€ì› ë‹¤ê³  í•˜ë”ë¼ë„ docker ê²½ë¡œì˜ ìš©ëŸ‰ë³€í™”ëŠ” ì—†ê²Œ ë©ë‹ˆë‹¤. ê·¸ëŸ´ ê²½ìš° ì•„ë˜ì˜ ëª…ë ¹ì–´ë¡œ ì•ˆì“°ëŠ” ì´ë¯¸ì§€ì™€ ì»¨í…Œì´ë„ˆë¥¼ ì‚­ì œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì˜ ëª…ë ¹ì–´ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ [docker docs](https://docs.docker.com/engine/reference/commandline/system_prune/#description) ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.

```bash
docker system prune -a -f
```

`-a` `-f` ì˜µì…˜ì— ëŒ€í•œ ì„¤ëª…ì…ë‹ˆë‹¤.

- `-a` - ì»¨í…Œì´ë„ˆì— ì—°ê²°ë˜ì§€ ì•Šì€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ëª¨ë“  ì´ë¯¸ì§€ë“¤ ì œê±°.
- `-f` - í”„ë¡¬í”„íŠ¸ë¡œ í™•ì¸ì„ í•˜ì§€ ì•ŠìŒ.

#### docker ê¸°ë³¸ ê²½ë¡œ ë³€ê²½

> ğŸ’¡ docker ê¸°ë³¸ ê²½ë¡œë¥¼ ë³€ê²½í•˜ë©´ ê¸°ì¡´ ê²½ë¡œì— ìˆë˜ ì´ë¯¸ì§€ì™€ ì»¨í…Œì´ë„ˆë“¤ì€ ì‚­ì œë©ë‹ˆë‹¤. ë¯¸ë¦¬ ë°±ì—…í•´ë‘ì‹œê¸¸ ë°”ëë‹ˆë‹¤.

dockerê°€ ì´ë¯¸ì§€, ì»¨í…Œì´ë„ˆë¥¼ ì €ì¥í•˜ê³  ê¸°íƒ€ íŒŒì¼ì„ ì €ì¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê²½ë¡œëŠ” `/var/lib/docker/` ì…ë‹ˆë‹¤. ì´ ê²½ë¡œë¥¼ ë„‰ë„‰í•œ ìš©ëŸ‰ì„ ê°€ì§„ ë””ë ‰í† ë¦¬ë¡œ ë³€ê²½í•´ì£¼ë©´ ìš©ëŸ‰ ë¬¸ì œë¥¼ ë²—ì–´ë‚  ìˆ˜ ìˆê² ì£ ?

> ğŸ™‹ğŸ»â€â™‚ï¸ ì•„ë˜ì˜ ë°©ë²•ì€ ë„ì»¤ ì„¤ì • íŒŒì¼ì„ í†µí•´ ë³€ê²½í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. `/lib/systemd/system/docker.service` íŒŒì¼ì„ ìˆ˜ì •í•˜ëŠ” ë°©ë²•ë„ ìˆì§€ë§Œ ì•„ë˜ì˜ ë°©ë²•ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

`daemon.json` íŒŒì¼ì„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. ì´ íŒŒì¼ì€ ê¸°ë³¸ì ìœ¼ë¡œ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì•„ë˜ì˜ ê²½ë¡œì— ë§Œë“¤ì–´ ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

```bash
vi /etc/docker/daemon.json
```

ë³€ê²½ë  ê²½ë¡œë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤. ì´ë ‡ê²Œ ë˜ë©´ ë„ì»¤ê°€ ì‹¤í–‰í•  ë•Œ ì € íŒŒì¼ì„ ì½ì–´ pathë¥¼ ê²°ì •í•©ë‹ˆë‹¤.

```json
{
  "graph": "/home/path" # ì›í•˜ëŠ” ê²½ë¡œë¡œ ì„¤ì •
}
```

`json` íŒŒì¼ì„ ì €ì¥í•˜ê³  ë„ì»¤ë¥¼ ì¬ì‹œì‘í•©ë‹ˆë‹¤.

```bash
sudo systemctl restart docker

# systemctl ëª…ë ¹ì–´ê°€ ì‚¬ìš©ë˜ì§€ ì•Šì„ ê²½ìš°
sudo service docker start
```

ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ê³  ë„ì»¤ë¥¼ í™•ì¸(`ps -ef | grep docker`)í•˜ë©´ ì•„ë˜ì²˜ëŸ¼ ë³€ê²½ëœ ê²½ë¡œë¡œ ë‚˜ì˜¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
root     21800 19983  0 10:52 ?        00:00:00 docker-containerd-shim -namespace moby -workdir /home/ykkim/docker/containerd/daemon/io.containerd.runtime.v1.linux/moby/8adc00f3bbdd4fd44110f42a7b25e8598019963a83b6b8d3d29266c426701db8 -address /var/run/docker/containerd/docker-containerd.sock -containerd-binary /usr/bin/docker-containerd -runtime-root /var/run/docker/runtime-runc
```

ì´ë ‡ê²Œ í•´ì„œ docker ê¸°ë³¸ ê²½ë¡œë¥¼ ë³€ê²½í•˜ê²Œ ë©ë‹ˆë‹¤.

